"use strict";const t=/([\d.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)/i,e=(()=>{const e=new Map;return r=>{const i=e.get(r);if(i)return i;const n=t.exec(r);if(!n)return 0;let s=Number(n[1]);switch(n[2]){case"pt":s/=.75;break;case"pc":s*=16;break;case"in":s*=96;break;case"cm":s*=96/2.54;break;case"mm":s*=96/25.4;break;case"em":case"rem":s*=16/.75;break;case"q":s*=96/25.4/4}return e.set(r,s),s}})(),r=(t,e,r)=>{const i=[],n=[],s=t.measureText(" ").width;for(const o of e.split(/\r?\n/)){let e=r;for(const a of o.split(" ")){const o=t.measureText(a).width,h=o+s;h>e?(n.length&&(i.push(n.join(" ")),n.length=0),n.push(a),e=r-o):(e-=h,n.push(a))}n.length&&(i.push(n.join(" ")),n.length=0)}return i.join("\n")};const i=t=>{const e=t.getImageData(),{data:r}=e;for(let t=0;t<r.length;t+=4){const e=.2126*r[t]+.7152*r[t+1]+.0722*r[t+2];r[t]=e,r[t+1]=e,r[t+2]=e}return t.putImageData(e,0,0)},n=i,s=t=>{const e=t.getImageData(),{data:r}=e;for(let t=0;t<r.length;t+=4){const e=255-(.2126*r[t]+.7152*r[t+1]+.0722*r[t+2]);r[t]=e,r[t+1]=e,r[t+2]=e}return t.putImageData(e,0,0)},o=s,a=(t,e)=>{const r=t.getImageData(),{data:i}=r;for(let t=0;t<i.length;t+=4)i[t]-=e,i[t+1]-=e,i[t+2]-=e;return t.putImageData(r,0,0)},h=a,c=(t,e,r=!0)=>{const i=Math.round(Math.sqrt(e.length)),n=Math.floor(i/2),s=t.getImageData(),o=s.data,a=s.width,h=s.height,c=a,l=h,u=t.getImageData(),p=u.data,x=r?1:0;for(let t=0;t<l;t++)for(let r=0;r<c;r++){const s=t,l=r,u=4*(t*c+r);let g=0,d=0,f=0,m=0;for(let t=0;t<i;t++)for(let r=0;r<i;r++){const c=s+t-n,u=l+r-n;if(c>=0&&c<h&&u>=0&&u<a){const n=4*(c*a+u),s=e[t*i+r];g+=o[n]*s,d+=o[n+1]*s,f+=o[n+2]*s,m+=o[n+3]*s}}p[u]=g,p[u+1]=d,p[u+2]=f,p[u+3]=m+x*(255-m)}return t.putImageData(u,0,0)},l=[0,-1,0,-1,4,-1,0,-1,0],u=[0,-1,0,-1,5,-1,0,-1,0],p=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9];exports.BaseCanvas=class{constructor(t,e){this.canvas=t,this.context=null!=e?e:this.canvas.getContext("2d")}get width(){return this.canvas.width}set width(t){this.canvas.width=t}get height(){return this.canvas.height}set height(t){this.canvas.height=t}get textFontHeight(){return e(this.context.font)}changeCanvasSize(t,e){return this.changeCanvasWidth(t).changeCanvasHeight(e)}changeCanvasWidth(t){return this.width=t,this}changeCanvasHeight(t){return this.height=t,this}save(){return this.context.save(),this}restore(){return this.context.restore(),this}rotate(t){return this.context.rotate(t),this}scale(t,e){return this.context.scale(t,e),this}translate(t,e){return this.context.translate(t,e),this}clip(t){return this.context.clip(t),this}setTransform(...t){return this.context.setTransform(...t),this}resetTransformation(){return this.setTransform(1,0,0,1,0,0)}resetFilters(){return this.setFilter("none")}getImageData(t,e,r,i,n){if("function"==typeof t&&(n=t,t=0),n){if("function"!=typeof n)throw new TypeError("Callback must be a function");return n.call(this,this.context.getImageData(null!=t?t:0,null!=e?e:0,null!=r?r:this.width,null!=i?i:this.height),this),this}return this.context.getImageData(null!=t?t:0,null!=e?e:0,null!=r?r:this.width,null!=i?i:this.height)}putImageData(...t){return this.context.putImageData(...t),this}fill(t){return this.context.fill(t),this}printText(t,e,r,...i){return this.context.fillText(t,e,r,...i),this}printResponsiveText(t,e,r,i){const[n,s,o]=this.parseFont(this.context.font);if("number"!=typeof s)return this.printText(t,e,r);const{width:a}=this.measureText(t);if(a<=i)return this.printText(t,e,r);const h=i/a*s;return this.save().setTextFont(`${n}${h}${o}`).printText(t,e,r).restore()}printMultilineText(t,e,r){const i=t.split(/\r?\n/);if(i.length<=1)return this.printText(t,e,r);const n=this.textFontHeight;let s=r;for(const t of i)this.printText(t,e,Math.floor(s)),s+=n;return this}printWrappedText(t,e,i,n){const s=r(this,t,n);return this.printMultilineText(s,e,i)}stroke(){return this.context.stroke(),this}printStrokeRectangle(t,e,r,i){return this.context.strokeRect(t,e,r,i),this}printStrokeText(t,e,r,i){return this.context.strokeText(t,e,r,i),this}measureText(t,e){if(e){if("function"!=typeof e)throw new TypeError("Callback must be a function.");return e.call(this,this.context.measureText(t),this),this}return this.context.measureText(t)}setTextSize(t){const e=this.parseFont(this.context.font);return 1===e.length?this:this.setTextFont(`${e[0]}${t}${e[2]}`)}setStroke(t){return this.context.strokeStyle=t,this}setLineWidth(t){return this.context.lineWidth=t,this}setStrokeWidth(t){return this.setLineWidth(t)}setLineDashOffset(t){return this.context.lineDashOffset=t,this}setLineJoin(t){return this.context.lineJoin=t,this}setLineCap(t){return this.context.lineCap=t,this}setLineDash(t){return this.context.setLineDash(t),this}printImage(...t){return this.context.drawImage(...t),this}printCircularImage(t,e,r,i,{fit:n="fill"}={}){const{positionX:s,positionY:o,sizeX:a,sizeY:h}=this.resolveCircularCoordinates(t,e,r,i,n);return this.save().createCircularClip(e,r,i,0,2*Math.PI,!1).printImage(t,s,o,a,h).restore()}printRoundedImage(t,e,r,i,n,s){return this.save().createRoundedClip(e,r,i,n,s).printImage(t,e,r,i,n).restore()}printCircle(t,e,r){return this.save().createCircularPath(t,e,r).fill().restore()}printRectangle(t,e,r,i){return this.context.fillRect(t,e,r,i),this}printRoundedRectangle(t,e,r,i,n){return this.save().createRoundedPath(t,e,r,i,n).fill().restore()}createCircularPath(t,e,r,i=0,n=2*Math.PI,s=!1){return this.context.beginPath(),this.context.arc(t,e,r,i,n,s),this}createCircularClip(t,e,r,i,n,s){return this.createCircularPath(t,e,r,i,n,s).clip()}createRectanglePath(t,e,r,i){return this.context.rect(t,e,r,i),this}createRectangleClip(t,e,r,i){return this.createRectanglePath(t,e,r,i).clip()}createRoundedPath(t,e,r,i,n){if(r>0&&i>0){let s;"number"==typeof n?s={tl:n=Math.min(n,r/2,i/2),tr:n,br:n,bl:n}:(s=n,n=Math.min(5,r/2,i/2));const{tl:o=n,tr:a=n,br:h=n,bl:c=n}=s;this.context.beginPath(),this.context.moveTo(t+o,e),this.context.lineTo(t+r-a,e),this.context.quadraticCurveTo(t+r,e,t+r,e+a),this.context.lineTo(t+r,e+i-h),this.context.quadraticCurveTo(t+r,e+i,t+r-h,e+i),this.context.lineTo(t+c,e+i),this.context.quadraticCurveTo(t,e+i,t,e+i-c),this.context.lineTo(t,e+o),this.context.quadraticCurveTo(t,e,t+o,e),this.context.closePath()}return this}createRoundedClip(t,e,r,i,n){return this.createRoundedPath(t,e,r,i,n).clip()}setColor(t){return this.context.fillStyle=t,this}setTextFont(t){return this.context.font=t,this}setTextAlign(t){return this.context.textAlign=t,this}setTextBaseline(t){return this.context.textBaseline=t,this}setFilter(t){return this.context.filter=t,this}beginPath(){return this.context.beginPath(),this}closePath(){return this.context.closePath(),this}createPattern(t,e,r){const i=this.context.createPattern(t,e);return r?(r.call(this,i,this),this):i}printPattern(t,e){return this.createPattern(t,e,(t=>this.setColor(t)))}createLinearGradient(t,e,r,i,n=[]){const s=this.context.createLinearGradient(t,e,r,i);for(const t of n)s.addColorStop(t.position,t.color);return s}printLinearColorGradient(t,e,r,i,n){const s=this.createLinearGradient(t,e,r,i,n);return this.setColor(s)}printLinearStrokeGradient(t,e,r,i,n){const s=this.createLinearGradient(t,e,r,i,n);return this.setStroke(s)}createRadialGradient(t,e,r,i,n,s,o=[]){const a=this.context.createRadialGradient(t,e,r,i,n,s);for(const t of o)a.addColorStop(t.position,t.color);return a}printRadialColorGradient(t,e,r,i,n,s,o){const a=this.createRadialGradient(t,e,r,i,n,s,o);return this.setColor(a)}printRadialStrokeGradient(t,e,r,i,n,s,o){const a=this.createRadialGradient(t,e,r,i,n,s,o);return this.setStroke(a)}createEllipsePath(t,e,r,i,n,s,o,a){return this.context.ellipse(t,e,r,i,n,s,o,a),this}createEllipseClip(t,e,r,i,n,s,o,a){return this.createEllipsePath(t,e,r,i,n,s,o,a).clip()}arc(t,e,r,i,n,s){return this.context.arc(t,e,r,i,n,s),this}arcTo(t,e,r,i,n){return this.context.arcTo(t,e,r,i,n),this}quadraticCurveTo(t,e,r,i){return this.context.quadraticCurveTo(t,e,r,i),this}bezierCurveTo(t,e,r,i,n,s){return this.context.bezierCurveTo(t,e,r,i,n,s),this}lineTo(t,e){return this.context.lineTo(t,e),this}moveTo(t,e){return this.context.moveTo(t,e),this}setShadowBlur(t){return this.context.shadowBlur=t,this}setShadowColor(t){return this.context.shadowColor=t,this}setShadowOffsetX(t){return this.context.shadowOffsetX=t,this}setShadowOffsetY(t){return this.context.shadowOffsetY=t,this}setMiterLimit(t){return this.context.miterLimit=t,this}setGlobalCompositeOperation(t){return this.context.globalCompositeOperation=t,this}setGlobalAlpha(t){return this.context.globalAlpha=t,this}resetShadows(){return this.setShadowBlur(0).setShadowOffsetX(0).setShadowOffsetY(0).setShadowColor("transparent")}clearCircle(t,e,r,i=0,n=2*Math.PI,s=!1){return this.createCircularClip(t,e,r,i,n,s).clearRectangle(t-r,e-r,2*r,2*r)}clearRectangle(t=0,e=0,r=this.width,i=this.height){return this.context.clearRect(t,e,r,i),this}getLineDash(){return this.context.getLineDash()}get lineDash(){return this.getLineDash()}isPointInPath(t,e,r){return this.context.isPointInPath(t,e,r)}isPointInStroke(t,e){return this.context.isPointInStroke(t,e)}process(t,...e){return t.call(this,this,...e),this}wrapText(t,e,i){const n=r(this,t,e);if(i){if("function"!=typeof i)throw new TypeError("Callback must be a function");return i.call(this,n,this),this}return n}parseFont(e){const r=t.exec(e);return null===r?[e]:[e.slice(0,r.index),Number(r[1]),e.slice(r.index+r[1].length)]}resolveCircularCoordinates(t,e,r,i,n){const{width:s,height:o}=t,[a,h]=["number"==typeof s?s:s.animVal.value,"number"==typeof o?o:o.animVal.value];if("none"===n)return{positionX:e-a/2,positionY:r-h/2,sizeX:a,sizeY:h};const c=a/h,l=2*i;if("fill"===n||1===c)return{positionX:e-i,positionY:r-i,sizeX:l,sizeY:l};if("contain"===n)return c>1?{positionX:e-i,positionY:r-i/c,sizeX:l,sizeY:l/c}:{positionX:e-i*c,positionY:r-i,sizeX:l*c,sizeY:l};if(c>1){const t=l*c;return{positionX:e-t/2,positionY:r-l/2,sizeX:t,sizeY:l}}const u=l/c;return{positionX:e-l/2,positionY:r-u/2,sizeX:l,sizeY:u}}},exports.blur=(t,e=1)=>{for(let r=0;r<e;++r)c(t,p,!0);return t},exports.brightness=(t,e)=>{const r=t.getImageData(),{data:i}=r;for(let t=0;t<i.length;t+=4)i[t]+=e,i[t+1]+=e,i[t+2]+=e;return t.putImageData(r,0,0)},exports.color=t=>t,exports.convolute=c,exports.darkness=a,exports.edge=t=>c(t,l,!0),exports.filter=(t,...e)=>`${t}(${e.join(" ")})`,exports.fontRegExp=t,exports.getFontHeight=e,exports.grayscale=n,exports.greyscale=i,exports.hex=t=>`#${t}`,exports.hsl=(t,e,r)=>`hsl(${t}, ${e}%, ${r}%)`,exports.hsla=(t,e,r,i)=>`hsla(${t}, ${e}%, ${r}%, ${i})`,exports.invert=t=>t.save().setGlobalCompositeOperation("difference").setColor("white").printRectangle(0,0,t.width,t.height).restore(),exports.invertGrayscale=s,exports.invertGreyscale=o,exports.invertedThreshold=(t,e)=>{const r=t.getImageData(),{data:i}=r;for(let t=0;t<i.length;t+=4){const r=.2126*i[t]+.7152*i[t+1]+.0722*i[t+2]>=e?0:255;i[t]=r,i[t+1]=r,i[t+2]=r}return t.putImageData(r,0,0)},exports.myOldFriend=h,exports.rgb=(t,e,r)=>`rgb(${t}, ${e}, ${r})`,exports.rgba=(t,e,r,i)=>`rgba(${t}, ${e}, ${r}, ${i})`,exports.sepia=t=>{const e=t.getImageData(),{data:r}=e;for(let t=0;t<r.length;t+=4){const e=r[t],i=r[t+1],n=r[t+2];r[t]=.393*e+.769*i+.189*n,r[t+1]=.349*e+.686*i+.168*n,r[t+2]=.272*e+.534*i+.131*n}return t.putImageData(e,0,0)},exports.sharpen=(t,e=1)=>{for(let r=0;r<e;++r)c(t,u,!0);return t},exports.silhouette=t=>{const e=t.getImageData(),{data:r}=e;for(let t=0;t<r.length;t+=4)r[t]=0,r[t+1]=0,r[t+2]=0;return t.putImageData(e,0,0)},exports.textWrap=r,exports.threshold=(t,e)=>{const r=t.getImageData(),{data:i}=r;for(let t=0;t<i.length;t+=4){const r=.2126*i[t]+.7152*i[t+1]+.0722*i[t+2]>=e?255:0;i[t]=r,i[t+1]=r,i[t+2]=r}return t.putImageData(r,0,0)};
//# sourceMappingURL=Filter-a41cb18d.js.map
